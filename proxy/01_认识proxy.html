<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>
    <script>
        var obj = new Proxy({}, {
            get: function (target, propKey, receiver) {
                console.log(`getting ${propKey}!`);
                return Reflect.get(target, propKey, receiver);
            },
            set: function (target, propKey, value, receiver) {
                console.log(`setting ${propKey}! `);
                return Reflect.set(target, propKey, value, receiver);
            }
        });


        obj.count22 = 1;
        ++obj.count22;

        let info = {}
        let a = new Proxy(info, {
            get() {
                return 355
            }
        })

        // 可以得到，想要Proxy生效，必须比new Proxy的实例对象进行操作。而不是对target目标对象(这里是info)对象进行操作
        console.log(info.name);
        console.log(a.name)
        console.log(a.age)

        //还可以将proxy对象作为原型
        let info2 = {}
        let a2 = new Proxy({}, {
            get() {
                return 123
            }
        })
        let b = Object.create(a2)
        console.log(b.name);


        var handler = {
            get: function (target, name) {
                if (name === 'prototype') {
                    return Object.prototype;
                }
                return 'Hello, ' + name;
            },

            // apply: function(target, thisBinding, args) {
            //     console.log('调用')
            //     return args[0];
            // },

            construct: function (target, args) {
                return {
                    value: args[1]
                };
            }
        };

        var fproxy = new Proxy(function (x, y) {
            return x + y;
        }, handler);

        fproxy() // 1
        // new fproxy(1, 2) // {value: 2}
        // fproxy.prototype === Object.prototype // true
        // fproxy.foo === "Hello, foo" // true
    </script>
</body>

</html>